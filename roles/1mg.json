{
  "json_class" : "Chef::Role",
  "name": "1mg",
  "run_list": [
    "recipe[base::stop_service]",
    "recipe[yum::epel]",
    "recipe[yum::remi]",
    "recipe[sendmail::setup]",
    "recipe[sshd::setup]",
    "recipe[nsd::setup]",
    "recipe[nsd::setup_zone]",
    "recipe[nginx::default]",
    "recipe[mysql::server]",
    "recipe[spawn-fcgi::default]",
    "recipe[php::default]",
    "recipe[iptables::default]",
    "recipe[base::gem]",
    "recipe[base::default]"
  ],
  "default_attributes" : {
    "base": {
      "on_services": [
      "crond",
      "modules_dep",
      "network",
      "portreserve",
      "rsyslog"
      ],
      "off_services": [
        "saslauthd",
        "xinetd",
        "smadmd",
        "serversman",
        "httpd",
        "ajaxterm",
        "netfs",
        "rpcbind",
        "ip6tables",
        "lvm2-monitor",
        "messagebus",
        "udev-post",
        "netconsole"
      ]
    },
    "spawnfcgi": {
      "owner" : "nginx",
      "group" : "nginx",
      "num" : "5"
    },
    "sshd" : {
      "conf_lists" : {
        "PermitRootLogin" : "yes",
        "ChallengeResponseAuthentication" : "no",
        "IgnoreUserKnownHosts" : "yes",
        "ClientAliveInterval" : "48"
      }
    },
    "nsd" : {
      "zones" : [{
        "zone_name" : "1mg.org",
        "xfr" : ["127.0.0.1","123.50.202.226","198.104.58.211"]
      }, {
        "zone_name" : "1mg.biz",
        "xfr" : ["127.0.0.1","123.50.202.226","198.104.58.211"]
        }
      ]
    },
    "nginx" : {
      "conf_lists" : ["server.1mg.org", "www.1mg.org"]
    },
    "php": {
      "sub_packages": [
        {"pkg_name": "php-mbstring"},
        {"pkg_name": "php-mcrypt", "pkg_option": "--enablerepo=epel"},
        {"pkg_name": "php-mysql"},
        {"pkg_name": "php-pecl-apc"}
      ]
    },
    "mysqld" : {
      "conf_options" : {
        "datadir" : "/usr/local/1mg/var/lib/mysql/"
      }
    }
  },
  "over_attributes" : {
  }
}
